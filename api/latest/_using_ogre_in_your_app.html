<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OGRE-Next: Using Ogre in your App</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="ogre_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ogre-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">OGRE-Next<span id="projectnumber">&#160;4.0.0unstable</span>
   </div>
   <div id="projectbrief">Object-Oriented Graphics Rendering Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_using_ogre_in_your_app.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using Ogre in your App</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#UsingOgreInYourAppOverview">Overview</a></li>
<li class="level1"><a href="#SpeedingThingsUp">Speeding things up</a><ul><li class="level2"><a href="#SmallNoteAbout_iOS">Small note about iOS</a></li>
<li class="level2"><a href="#autotoc_md17">Apple specific</a></li>
<li class="level2"><a href="#CreatingYourApplication">Creating your application with &#39;EmptyProject&#39; script</a><ul><li class="level3"><a href="#AnoteaboutcopiedfilesfromSamples_20_Common">A note about copied files from Samples/2.0/Common</a></li>
</ul>
</li>
<li class="level2"><a href="#SupportingMultithreadingLoopsFromTheGetGo">Supporting Multithreading loops from the get go</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="UsingOgreInYourAppOverview"></a>
Overview</h1>
<p>We'll setup an application that uses OgreNext. For that, we'll use the Demo Framework that comes with the samples as a starting point.</p>
<p>For OgreNext to work correctly, you'll need to register Hlms implementations. We provide PBS (Physically Based Shading) and Unlit implementations for you to use out of the box. These implementations will require you to include their data folders, it's not just header and libraries.</p>
<p>You will need to:</p><ul>
<li>Include OgreMain/include</li>
<li>Include Components/Hlms/Common/include</li>
<li>Include Components/Hlms/Pbs/include</li>
<li>Include Components/Hlms/Unlit/include</li>
<li>Include build/Release/include (that's where OgreBuildSettings.h is). This path depends on the platform. On Windows (<a class="el" href="class_visual.html">Visual</a> Studio) it's build/include</li>
<li>Add the link path build/Release/lib/. This path depends on the platform. On Windows (<a class="el" href="class_visual.html">Visual</a> Studio) it's build/lib/Release</li>
<li>Link against OgreHlmsPbs.lib</li>
<li>Link against OgreHlmsUnlit.lib</li>
<li>Link against OgreMain.lib</li>
<li>Bundle the data files in Samples/Media/Hlms/Common with your application</li>
<li>Bundle the data files in Samples/Media/Hlms/Pbs with your application</li>
<li>Bundle the data files in Samples/Media/Hlms/Unlit with your application</li>
</ul>
<p><b>Notes:</b></p><ul>
<li>Do not put the Hlms data files into the same folder. Do not flatten the folders inside of each Hlms. In simple words, respect the directory structure.</li>
<li>For Debug builds, you'll obviously have to link against build/Debug/NameOfLibrary_d. Do <b>NOT</b> mix Debug and Release libraries. It can be done (depends on the platform) but it requires very advanced knowledge. Only if you know what you're doing.</li>
<li>On <em>nix OSes, replace OgreMain.lib with libOgreMain.so and so forth. You know the drill</em></li>
<li><em>If you've build the static version (i.e. OGRE_STATIC in CMake) you will also need to link and include every RenderSystem and plugin you want to use.</em></li>
<li><em>*Note for new users:</em> In <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a>, 'Components' are always linked statically to your project. 'Plugins' instead can be loaded at runtime (unless <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> was build with OGRE_STATIC_LIB)</li>
</ul>
<p><b>Optional</b></p><ul>
<li>Include Components/Overlay/include for 2D Overlays</li>
<li>Link against build/Release/lib/OgreOverlay for 2D Overlays</li>
<li>Bundle the data files in Samples/Media/2.0/scripts/materials/Common (highly recommended).</li>
<li>Bundle the data files in Samples/Media/packs/DebugPack.zip It contains a font file for text rendering, a Cube mesh, and a Sphere mesh. Very useful for debugging.</li>
</ul>
<h1><a class="anchor" id="SpeedingThingsUp"></a>
Speeding things up</h1>
<p>Setting up a project to use <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> can be time consuming. We want you to kick directly into showing something on screen. Fortunately, CMake can automate the job for us while also staying cross platform!</p>
<p>This script can be found in <b>Samples/2.0/Tutorials/EmptyProject</b></p>
<p><b>What this script does:</b> It will setup a project with the following folder structure: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Folder   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">build   </td><td class="markdownTableBodyNone">Internally used by CMake. That's where the solution/project file for <a class="el" href="class_visual.html">Visual</a> Studio is stored (or makefiles for GNU Make, etc). Also likely object and PDB files from your compiler will end up there.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">bin   </td><td class="markdownTableBodyNone">That's where your binaries will be generated. Your binaries will actually be in bin/Release bin/Debug, etc.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">bin/Data   </td><td class="markdownTableBodyNone">That's where your assets should go. The script will automatically copy the Hlms data files to this location every time you run CMake's Generate.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMake   </td><td class="markdownTableBodyNone">Files used by the CMake script we're talking about.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CMake/Templates/Plugins.cfg.in   </td><td class="markdownTableBodyNone">Will be used to generate the real Plugins.cfg to know which plugins to load. The script will automatically generate the correct suffixes for the Debug builds, and skip RenderSystems that weren't built (e.g. D3D11 can never be used as a plugin in Linux). <b>You can edit it to add more plugins here</b>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMake/Templates/Resources.cfg.in   </td><td class="markdownTableBodyNone">Will be used to generate the real Resource.cfg tells your app what locations to load for the assets. It needs to be automatically generated to correctly deal with iOS. <b>You can edit it to add your own folders here</b>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Dependencies/Ogre   </td><td class="markdownTableBodyNone">The script expects <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> to be there (can be tweaked). You can use symbolic links (<code>mklink /D</code> on Windows, <code>ln -s</code> in Linux). This is tweakable though.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">include   </td><td class="markdownTableBodyNone">Where your header files should be.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">src   </td><td class="markdownTableBodyNone">Where your cpp files will be located.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CMakeLists.txt   </td><td class="markdownTableBodyNone">The script we're talking about.   </td></tr>
</table>
<p>The script accepts the following parameters:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OGRE_SOURCE   </td><td class="markdownTableBodyNone">Where <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> repository is located. By default it assumes it's at Dependencies/Ogre    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OGRE_BINARIES   </td><td class="markdownTableBodyNone">Where <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> was built (the folder generated by CMake). By default it assumes it's at Dependencies/Ogre/build    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OGRE_DEPENDENCIES   </td><td class="markdownTableBodyNone">Path to <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a>'s dependencies. By default it assumes it's Dependencies/Ogre/Dependencies or Dependencies/Ogre/iOSDependencies. Only used when <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> was configured as static build.   </td></tr>
</table>
<h2><a class="anchor" id="SmallNoteAbout_iOS"></a>
Small note about iOS</h2>
<p>You will find the first line of CMakeLists.txt to be commented: </p><div class="fragment"><div class="line">#set( CMAKE_TOOLCHAIN_FILE CMake/iOS.cmake )</div>
</div><!-- fragment --><p> Uncomment it, and run the CMakeLists.txt script.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Apple specific</h2>
<p>To use EmptyProject in both iOS and macOS, OgreNext must have been compiled with CMake options: </p><pre class="fragment">* `-DOGRE_BUILD_LIBS_AS_FRAMEWORKS=0`
* `-DOGRE_STATIC=1`
</pre> <h2><a class="anchor" id="CreatingYourApplication"></a>
Creating your application with 'EmptyProject' script</h2>
<ol type="1">
<li>Copy Samples/2.0/Tutorials/EmptyProject to wherever you want. We'll refer to its location now as "EmptyProject"</li>
<li>Copy <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> repository (or use symbolic links) to EmptyProject/Dependencies/Ogre</li>
<li>Run CMake on EmptyProject and build into EmptyProject/build (though you can choose a different path if you want).</li>
<li>On Linux, CMake may complain that EmptyProject/Dependencies/Ogre/build/RelWithDebInfo was not found if you didn't build that version. In that case modify CMAKE_BUILD_TYPE and OGRE_BINARIES to point to the correct build type (e.g. Debug instead) and run Configure again.</li>
<li>Compile the project.</li>
<li>Run it. If necessary, configure the working directory to be EmptyProject/bin/Release (on <a class="el" href="class_visual.html">Visual</a> Studio, Alt+F7 -&gt; Debugging -&gt; Working Directory)</li>
</ol>
<h3><a class="anchor" id="AnoteaboutcopiedfilesfromSamples_20_Common"></a>
A note about copied files from Samples/2.0/Common</h3>
<p>The script will copy all the files from Samples/2.0/Common so you already have a system in place that takes care of window management and input and other misc stuff.</p>
<p>We believe the developer should be in charge of their entry points. Problem is, not all platforms are the same:</p><ul>
<li>On Linux you should use int main( int argc, const char *argv[] );</li>
<li>On Windows you should use WinMain (windows apps) or int main like in Linux (console)</li>
<li>On iOS you must declare int main, but Apple really wants you to use an AppDelegate.</li>
<li>On Android you the entry point is loaded then executed from your Java code.</li>
</ul>
<p>Some frameworks address this problem by forcing you to derive from some arbitrary class, or using macros.</p>
<p><b>We don't force you to do anything</b>, but we provide utility functions if you don't want to deal with issue.</p>
<p>While you could link against OgreSamplesCommon.lib (in fact that library does exist), the reality is that your project will likely evolve and you may want to modify these files yourself, as they control key aspects of the lifetime of your application. Therefore we give you the freedom to do that.</p>
<p>You could link directly against OgreSamplesCommon.lib if you want, instead of copying the src files from Samples/2.0/Common/src. Nothing is really stopping you from doing that.</p>
<h2><a class="anchor" id="SupportingMultithreadingLoopsFromTheGetGo"></a>
Supporting Multithreading loops from the get go</h2>
<p>Adding Multithreading after you've started your application can be much harder than doing it from the start. We recommend you take a look at all the tutorial samples in this order:</p><ol type="1">
<li>Tutorial01_Initialization</li>
<li>Tutorial02_VariableFramerate</li>
<li>Tutorial03_DeterministicLoop</li>
<li>Tutorial04_InterpolationLoop</li>
<li>Tutorial05_MultithreadingBasics</li>
<li>Tutorial06_Multithreading to familiarize yourself with <a class="el" href="namespace_ogre.html" title="bswapNN may be defined as macros in &lt;sys/endian.h&gt; or &lt;sys/bswap.h&gt;">Ogre</a> and how to setup a basic main loop. The last two tutorials show how to detach Logic and Physics simulation from Rendering, having both communicating via messages passed at the end of the frame.</li>
</ol>
<p>Once you understand how the multithreading approach works, replace <code>Demo::MainEntryPoints::mainAppSingleThreaded</code> with <code>Demo::MainEntryPoints::mainAppMultiThreaded</code> in EmptyProjectGameState.cpp and create valid pointers in MainEntryPoints::createSystems. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
